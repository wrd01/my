<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
		<script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
		<script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
		<title>天气查询</title>
		<script type="text/javascript">
			$(function() {
				getWeather('南昌');

				$("#search").click(function() {
					getCity();
				})

				$("#city").keyup(function(event) {
					if (event.keyCode == 13) {
						getCity();
					}
				})

				function getCity() {
					if ($("#city").val().length != 0) {
						getWeather($("#city").val().trim());
					} else {
						getWeather('南昌');
					}
				}

				function getWeather(City) {
					$.get("https://free-api.heweather.com/s6/weather/now?location=" + City +
						"&key=eb33dbe3cb9942619130dd85e05056d6",
						function(data) {
							$("#city_y").text(data.HeWeather6[0].basic.location);
							$("#cond_txt").text(data.HeWeather6[0].now.cond_txt);
							$("#tmp").text(data.HeWeather6[0].now.tmp);
							$("#wind_dir").text(data.HeWeather6[0].now.wind_dir);
							$("#wind_sc").text(data.HeWeather6[0].now.wind_sc);
						})
				}

			})
		</script>
	</head>
	<body class="container">
		<div class="jumbotron text-center">
			<h2 class="display-4">看天气</h2>
			<p>城市和地区实时天气查询</p>
		</div>
		<div class="input-group mb-3">
			<input type="text" class="form-control text-center" placeholder="请输入城市名称" id="city" />
			<div class="input-group-append">
				<input type="button" name="" class="btn btn-primary" id="search" value="查询" />
			</div>
		</div>
		<div class="card border-success">
			<div class="card-header bg-success text-white text-center" id="show">
				<span id="city_y">

				</span>天气数据
			</div>
			<div class="csrd-body pl-5">
				<div>
					天气：<span id="cond_txt"></span>
				</div>
				<div>
					温度：<span id="tmp">

					</span>
				</div>
				<div>
					风向：<span id="wind_dir">

					</span>
				</div>
				<div>
					风力：<span id="wind_sc">
					</span>
				</div>

			</div>
			<div class="card-footer bg-success text-white text-center">
				数据源：和风天气API
			</div>
		</div>
	</body>
</html>
